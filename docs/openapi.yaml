openapi: 3.0.0
paths:
  /api/v1/auth/info:
    get:
      description: >-
        Returns Keycloak server information for client-side authentication
        setup.
      operationId: getAuthInfo
      parameters: []
      responses:
        '200':
          description: Authentication info retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  authServerUrl:
                    type: string
                    example: http://localhost:8080
                  realm:
                    type: string
                    example: foodmission
                  clientId:
                    type: string
                    example: foodmission-web
                  redirectUri:
                    type: string
                    example: http://localhost:3000
      summary: Get Keycloak authentication info
      tags: &ref_0
        - auth
  /api/v1/auth/profile:
    get:
      description: >-
        Returns the profile information of the currently authenticated user.
        Automatically creates user record if not exists.
      operationId: getProfile
      parameters: []
      responses:
        '200':
          description: User profile retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                    format: uuid
                  email:
                    type: string
                    format: email
                  firstName:
                    type: string
                  lastName:
                    type: string
                  keycloakId:
                    type: string
                  preferences:
                    type: object
                  settings:
                    type: object
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - keycloak-oauth2:
            - openid
            - profile
            - email
        - JWT-auth: []
      summary: Get authenticated user profile
      tags: *ref_0
  /api/v1/auth/profile/preferences:
    put:
      description: Update app-specific user preferences. Returns the updated user profile.
      operationId: updatePreferences
      parameters: []
      requestBody:
        required: true
        description: User preferences object (JSON)
        content:
          application/json:
            schema:
              type: object
              example:
                dietaryRestrictions:
                  - vegetarian
                allergies:
                  - nuts
                theme: dark
      responses:
        '200':
          description: User preferences updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                    format: uuid
                  email:
                    type: string
                    format: email
                  firstName:
                    type: string
                  lastName:
                    type: string
                  keycloakId:
                    type: string
                  preferences:
                    type: object
                  settings:
                    type: object
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - keycloak-oauth2:
            - openid
            - profile
        - JWT-auth: []
      summary: Update user preferences
      tags: *ref_0
  /api/v1/auth/profile/settings:
    put:
      description: Update app-specific user settings. Returns the updated user profile.
      operationId: updateSettings
      parameters: []
      requestBody:
        required: true
        description: User settings object (JSON)
        content:
          application/json:
            schema:
              type: object
              example:
                language: en
                notifications: true
                timezone: UTC
      responses:
        '200':
          description: User settings updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                    format: uuid
                  email:
                    type: string
                    format: email
                  firstName:
                    type: string
                  lastName:
                    type: string
                  keycloakId:
                    type: string
                  preferences:
                    type: object
                  settings:
                    type: object
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - keycloak-oauth2:
            - openid
            - profile
        - JWT-auth: []
      summary: Update user settings
      tags: *ref_0
  /api/v1/auth/health:
    get:
      description: >-
        Returns the health status of the authentication service. This endpoint
        is public.
      operationId: healthCheck
      parameters: []
      responses:
        '200':
          description: Service is healthy
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: ok
                  service:
                    type: string
                    example: auth
      summary: Authentication service health check
      tags: *ref_0
  /api/v1/auth/token-info:
    get:
      description: >-
        Returns detailed information about the current JWT token. Requires valid
        JWT token.
      operationId: getTokenInfo
      parameters: []
      responses:
        '200':
          description: Token information retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  sub:
                    type: string
                    example: f47ac10b-58cc-4372-a567-0e02b2c3d479
                    description: Subject (user ID) from token
                  email:
                    type: string
                    format: email
                    example: john.doe@example.com
                  name:
                    type: string
                    example: John Doe
                  given_name:
                    type: string
                    example: John
                  family_name:
                    type: string
                    example: Doe
                  roles:
                    type: array
                    items:
                      type: string
                    example:
                      - user
                      - admin
                  exp:
                    type: number
                    example: 1640995200
                    description: Token expiration timestamp
                  iat:
                    type: number
                    example: 1640991600
                    description: Token issued at timestamp
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - keycloak-oauth2:
            - openid
            - profile
            - email
        - JWT-auth: []
      summary: Get JWT token information
      tags: *ref_0
  /api/v1/auth/admin-only:
    get:
      description: >-
        Test endpoint that requires admin role. Used for testing role-based
        access control.
      operationId: adminEndpoint
      parameters: []
      responses:
        '200':
          description: Admin access confirmed
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Admin access granted
                  status:
                    type: string
                    example: success
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - keycloak-oauth2:
            - openid
            - profile
            - roles
        - JWT-auth: []
      summary: Admin-only test endpoint
      tags: *ref_0
  /api/v1/users:
    post:
      operationId: create
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateUserDto'
      responses:
        '201':
          description: User created successfully
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - keycloak-oauth2:
            - openid
            - profile
            - roles
        - JWT-auth: []
      summary: Create a new user
      tags: &ref_1
        - users
    get:
      operationId: findAll
      parameters: []
      responses:
        '200':
          description: List of all users
      security:
        - keycloak-oauth2:
            - openid
            - profile
            - roles
        - JWT-auth: []
      summary: Get all users
      tags: *ref_1
  /api/v1/users/{id}:
    get:
      operationId: findOne
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: User found
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - keycloak-oauth2:
            - openid
            - profile
            - roles
        - JWT-auth: []
      summary: Get user by ID
      tags: *ref_1
    patch:
      operationId: update
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateUserDto'
      responses:
        '200':
          description: User updated successfully
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - keycloak-oauth2:
            - openid
            - profile
            - roles
        - JWT-auth: []
      summary: Update user
      tags: *ref_1
    delete:
      operationId: remove
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: User deleted successfully
        '404':
          description: User not found
      security:
        - keycloak-oauth2:
            - openid
            - profile
            - roles
        - JWT-auth: []
      summary: Delete user
      tags: *ref_1
  /api/v1/users/{id}/preferences:
    get:
      operationId: getPreferences
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: User preferences
      security:
        - keycloak-oauth2:
            - openid
            - profile
            - roles
        - JWT-auth: []
      summary: Get user preferences
      tags: *ref_1
    patch:
      operationId: updatePreferences
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserPreferencesDto'
      responses:
        '200':
          description: Preferences updated successfully
      security:
        - keycloak-oauth2:
            - openid
            - profile
            - roles
        - JWT-auth: []
      summary: Update user preferences
      tags: *ref_1
  /api/v1/foods:
    post:
      description: Creates a new food item in the database. Requires user or admin role.
      operationId: create
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateFoodDto'
      responses:
        '201':
          description: Food item created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FoodResponseDto'
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - keycloak-oauth2:
            - openid
            - profile
            - roles
        - JWT-auth: []
      summary: Create a new food item
      tags: &ref_2
        - foods
    get:
      description: >-
        Retrieves a paginated list of food items with optional filtering and
        sorting.
      operationId: findAll
      parameters: []
      responses:
        '200':
          description: List of food items retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedFoodResponseDto'
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      summary: Get all food items
      tags: *ref_2
  /api/v1/foods/search/openfoodfacts:
    get:
      description: >-
        Search for products in the OpenFoodFacts database by name, category, or
        brand. Supports pagination with page and pageSize parameters.
      operationId: searchOpenFoodFacts
      parameters:
        - name: query
          required: false
          in: query
          description: Search query string (name, category, or brand)
          schema:
            type: string
        - name: category
          required: false
          in: query
          description: Filter by category
          schema:
            type: string
        - name: brand
          required: false
          in: query
          description: Filter by brand
          schema:
            type: string
        - name: page
          required: false
          in: query
          description: 'Page number (default: 1, min: 1)'
          schema:
            type: number
        - name: pageSize
          required: false
          in: query
          description: >-
            Items per page (default: 10, min: 1, max: 50). Can also use limit
            parameter for backward compatibility.
          schema:
            type: number
        - name: limit
          required: false
          in: query
          description: >-
            Items per page (alternative to pageSize, for backward compatibility,
            min: 1, max: 50)
          schema:
            type: number
      responses:
        '200':
          description: Search results from OpenFoodFacts
          content:
            application/json:
              schema:
                type: object
                properties:
                  products:
                    type: array
                    items:
                      $ref: '#/components/schemas/OpenFoodFactsInfoDto'
                  totalCount:
                    type: number
                  page:
                    type: number
                  pageSize:
                    type: number
                  totalPages:
                    type: number
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '503':
          description: OpenFoodFacts service unavailable
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      summary: Search OpenFoodFacts database
      tags: *ref_2
  /api/v1/foods/import/openfoodfacts/{barcode}:
    post:
      description: Imports a food item from OpenFoodFacts database using barcode.
      operationId: importFromOpenFoodFacts
      parameters:
        - name: barcode
          required: true
          in: path
          description: Product barcode
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties: {}
      responses:
        '201':
          description: Food imported successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FoodResponseDto'
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '503':
          description: OpenFoodFacts service unavailable
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - keycloak-oauth2:
            - openid
            - profile
            - roles
        - JWT-auth: []
      summary: Import food from OpenFoodFacts
      tags: *ref_2
  /api/v1/foods/barcode/{barcode}:
    get:
      description: >-
        Retrieves a food item by its barcode. Optionally includes OpenFoodFacts
        information.
      operationId: findByBarcode
      parameters:
        - name: barcode
          required: true
          in: path
          description: Product barcode
          schema:
            type: string
        - name: includeOpenFoodFacts
          required: false
          in: query
          description: Include OpenFoodFacts information in response
          schema:
            type: boolean
      responses:
        '200':
          description: Food item found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FoodResponseDto'
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      summary: Find food by barcode
      tags: *ref_2
  /api/v1/foods/{id}:
    get:
      description: >-
        Retrieves a food item by its ID. Optionally includes OpenFoodFacts
        information.
      operationId: findOne
      parameters:
        - name: id
          required: true
          in: path
          description: Food item ID
          schema:
            format: uuid
            type: string
        - name: includeOpenFoodFacts
          required: false
          in: query
          description: Include OpenFoodFacts information in response
          schema:
            type: boolean
      responses:
        '200':
          description: Food item found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FoodResponseDto'
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      summary: Find food by ID
      tags: *ref_2
    patch:
      description: Updates a food item by its ID. Requires user or admin role.
      operationId: update
      parameters:
        - name: id
          required: true
          in: path
          description: Food item ID
          schema:
            format: uuid
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateFoodDto'
      responses:
        '200':
          description: Food item updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FoodResponseDto'
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - keycloak-oauth2:
            - openid
            - profile
            - roles
        - JWT-auth: []
      summary: Update food item
      tags: *ref_2
    delete:
      description: Deletes a food item by its ID. Requires admin role.
      operationId: remove
      parameters:
        - name: id
          required: true
          in: path
          description: Food item ID
          schema:
            format: uuid
            type: string
      responses:
        '204':
          description: Food item deleted successfully
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - keycloak-oauth2:
            - openid
            - profile
            - roles
        - JWT-auth: []
      summary: Delete food item
      tags: *ref_2
  /api/v1/foods/{id}/openfoodfacts:
    get:
      description: >-
        Retrieves OpenFoodFacts information for a food item by its ID, if the
        food has a barcode.
      operationId: getOpenFoodFactsInfo
      parameters:
        - name: id
          required: true
          in: path
          description: Food item ID
          schema:
            format: uuid
            type: string
      responses:
        '200':
          description: OpenFoodFacts information retrieved successfully
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/OpenFoodFactsInfoDto'
                  - type: 'null'
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '503':
          description: OpenFoodFacts service unavailable
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      summary: Get OpenFoodFacts information for food item
      tags: *ref_2
  /api/v1/health:
    get:
      operationId: check
      parameters: []
      responses:
        '200':
          description: Health check passed
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: ok
                  info:
                    type: object
                    properties:
                      database:
                        type: object
                        properties:
                          status:
                            type: string
                            example: up
                      openfoodfacts:
                        type: object
                        properties:
                          status:
                            type: string
                            example: up
                  error:
                    type: object
                  details:
                    type: object
                    properties:
                      database:
                        type: object
                        properties:
                          status:
                            type: string
                            example: up
                      openfoodfacts:
                        type: object
                        properties:
                          status:
                            type: string
                            example: up
        '503':
          description: Health check failed
      summary: Get application health status
      tags: &ref_3
        - Health
  /api/v1/health/ready:
    get:
      operationId: readiness
      parameters: []
      responses:
        '200':
          description: Application is ready
        '503':
          description: Application is not ready
      summary: Get readiness probe status
      tags: *ref_3
  /api/v1/health/live:
    get:
      operationId: liveness
      parameters: []
      responses:
        '200':
          description: Application is alive
        '503':
          description: The Health Check is not successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: error
                  info:
                    type: object
                    example:
                      database: &ref_4
                        status: up
                    additionalProperties:
                      type: object
                      required:
                        - status
                      properties:
                        status:
                          type: string
                      additionalProperties: true
                    nullable: true
                  error:
                    type: object
                    example:
                      redis: &ref_5
                        status: down
                        message: Could not connect
                    additionalProperties:
                      type: object
                      required:
                        - status
                      properties:
                        status:
                          type: string
                      additionalProperties: true
                    nullable: true
                  details:
                    type: object
                    example:
                      database: *ref_4
                      redis: *ref_5
                    additionalProperties:
                      type: object
                      required:
                        - status
                      properties:
                        status:
                          type: string
                      additionalProperties: true
      summary: Get liveness probe status
      tags: *ref_3
  /api/v1/metrics:
    get:
      description: Returns application metrics in Prometheus format for scraping
      operationId: getMetrics
      parameters: []
      responses:
        '200':
          description: Metrics in Prometheus format
          content:
            text/plain:
              example: >-
                # HELP http_requests_total Total number of HTTP requests

                # TYPE http_requests_total counter

                http_requests_total{method="GET",route="/api/foods",status_code="200"}
                42


                # HELP http_request_duration_seconds Duration of HTTP requests
                in seconds

                # TYPE http_request_duration_seconds histogram

                http_request_duration_seconds_bucket{method="GET",route="/api/foods",status_code="200",le="0.1"}
                10

                http_request_duration_seconds_bucket{method="GET",route="/api/foods",status_code="200",le="0.3"}
                25

                http_request_duration_seconds_bucket{method="GET",route="/api/foods",status_code="200",le="0.5"}
                35

                http_request_duration_seconds_bucket{method="GET",route="/api/foods",status_code="200",le="+Inf"}
                42

                http_request_duration_seconds_sum{method="GET",route="/api/foods",status_code="200"}
                8.2

                http_request_duration_seconds_count{method="GET",route="/api/foods",status_code="200"}
                42
      summary: Get Prometheus metrics
      tags:
        - Monitoring
  /api/v1/performance/summary:
    get:
      operationId: getPerformanceSummary
      parameters: []
      responses:
        '200':
          description: Performance summary retrieved successfully
      summary: Get performance summary
      tags: &ref_6
        - Performance
  /api/v1/performance/cache/stats:
    get:
      operationId: getCacheStats
      parameters: []
      responses:
        '200':
          description: Cache statistics retrieved successfully
      summary: Get cache statistics
      tags: *ref_6
  /api/v1/performance/cache/hit-rate:
    get:
      operationId: getCacheHitRates
      parameters: []
      responses:
        '200':
          description: Cache hit rates retrieved successfully
      summary: Get cache hit rates by prefix
      tags: *ref_6
  /api/v1/performance/database/stats:
    get:
      operationId: getDatabaseStats
      parameters: []
      responses:
        '200':
          description: Database statistics retrieved successfully
      summary: Get database performance statistics
      tags: *ref_6
  /api/v1/shoppinglist:
    post:
      description: Creates a new ShoppingList in the database. Requires user or admin role.
      operationId: create
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateShoppingListDto'
      responses:
        '201':
          description: Shopping list created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ShoppingListResponseDto'
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: Create a new Shopping List
      tags: &ref_7
        - shoppinglist
    get:
      operationId: findAll
      parameters:
        - name: search
          required: false
          in: query
          schema: {}
      responses:
        '200':
          description: Shopping lists retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MultipleShoppingListResponseDto'
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      summary: Get All Shoppinglists
      tags: *ref_7
  /api/v1/shoppinglist/{id}/items:
    get:
      description: Retrieve all items belonging to a shopping list with optional filters
      operationId: findItems
      parameters:
        - name: id
          required: true
          in: path
          schema:
            format: uuid
            type: string
        - name: shoppingListId
          required: false
          in: query
          description: Filter by shopping list ID
          schema:
            example: uuid-shopping-list-id
            type: string
        - name: foodId
          required: false
          in: query
          description: Filter by food ID
          schema:
            example: uuid-food-id
            type: string
        - name: checked
          required: false
          in: query
          description: Filter by checked status
          schema:
            example: false
            type: boolean
        - name: unit
          required: false
          in: query
          description: Filter by unit
          schema:
            example: KG
            type: string
            enum:
              - PIECES
              - G
              - KG
              - ML
              - L
              - CUPS
      responses:
        '200':
          description: Shopping list items retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MultipleShoppingListItemResponseDto'
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: Get items for a specific shopping list
      tags: *ref_7
  /api/v1/shoppinglist/{id}:
    get:
      operationId: findById
      parameters:
        - name: id
          required: true
          in: path
          schema:
            format: uuid
            type: string
      responses:
        '200':
          description: Shopping list found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ShoppingListResponseDto'
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: Get specific shopping list by ID
      tags: *ref_7
    patch:
      operationId: update
      parameters:
        - name: id
          required: true
          in: path
          schema:
            format: uuid
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateShoppingListDto'
      responses:
        '200':
          description: Shopping list found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ShoppingListResponseDto'
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: Update shopping list
      tags: *ref_7
    delete:
      operationId: remove
      parameters:
        - name: id
          required: true
          in: path
          schema:
            format: uuid
            type: string
      responses:
        '200':
          description: Shopping list deleted successfully
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: Delete specific shopping list by ID
      tags: *ref_7
  /api/v1/shopping-list-items:
    post:
      description: >-
        Creates a new ShoppingListItem and adds it to the specified shopping
        list. Requires user or admin role.
      operationId: create
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateShoppingListItemDto'
      responses:
        '201':
          description: Shopping list item created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ShoppingListItemResponseDto'
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: Add a new item to shopping list
      tags: &ref_8
        - shopping-list-items
  /api/v1/shopping-list-items/item/{id}:
    get:
      operationId: findById
      parameters:
        - name: id
          required: true
          in: path
          schema:
            format: uuid
            type: string
      responses:
        '200':
          description: Shopping list item found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ShoppingListItemResponseDto'
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: Get specific shopping list item by ID
      tags: *ref_8
  /api/v1/shopping-list-items/{id}:
    patch:
      description: Update quantity, unit, notes, or checked status of a shopping list item
      operationId: update
      parameters:
        - name: id
          required: true
          in: path
          schema:
            format: uuid
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateShoppingListItemDto'
      responses:
        '200':
          description: Shopping list item updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ShoppingListItemResponseDto'
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: Update shopping list item
      tags: *ref_8
    delete:
      description: Delete a specific shopping list item by ID
      operationId: remove
      parameters:
        - name: id
          required: true
          in: path
          schema:
            format: uuid
            type: string
      responses:
        '200':
          description: Shopping list item deleted successfully
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: Remove item from shopping list
      tags: *ref_8
  /api/v1/shopping-list-items/{id}/toggle-checked:
    patch:
      description: Quick endpoint to toggle the checked status of an item
      operationId: toggleChecked
      parameters:
        - name: id
          required: true
          in: path
          schema:
            format: uuid
            type: string
      responses:
        '200':
          description: Item checked status toggled successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ShoppingListItemResponseDto'
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: Toggle checked status of shopping list item
      tags: *ref_8
  /api/v1/shopping-list-items/{shoppingListId}/clear-checked:
    delete:
      description: Remove all checked items from a specific shopping list
      operationId: clearCheckedItems
      parameters:
        - name: shoppingListId
          required: true
          in: path
          schema:
            format: uuid
            type: string
      responses:
        '200':
          description: Checked items cleared successfully
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: Clear all checked items from shopping list
      tags: *ref_8
  /api/v1/pantry:
    post:
      description: >-
        Creates a new pantry for the authenticated user. Users can have multiple
        pantries. If a pantry with the same title already exists for the user,
        returns a conflict error. Requires user or admin role.
      operationId: create
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreatePantryDto'
      responses:
        '201':
          description: Pantry created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PantryResponseDto'
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: A pantry with this title already exists for this user.
      security:
        - JWT-auth: []
      summary: Create a new Pantry
      tags: &ref_9
        - pantry
    get:
      description: >-
        Retrieves all pantries for the authenticated user with all items.
        Returns an empty array if no pantries exist.
      operationId: getAllPantries
      parameters: []
      responses:
        '200':
          description: List of pantries retrieved successfully
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/PantryResponseDto'
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: Get all user pantries
      tags: *ref_9
  /api/v1/pantry/{id}:
    get:
      description: >-
        Retrieves a specific pantry by ID for the authenticated user. Only the
        pantry owner can access it.
      operationId: getPantryById
      parameters:
        - name: id
          required: true
          in: path
          schema:
            format: uuid
            type: string
      responses:
        '200':
          description: Pantry retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PantryResponseDto'
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: No permission - user does not own this pantry
        '404':
          description: Pantry not found
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: Get pantry by ID
      tags: *ref_9
    patch:
      description: Updates the pantry title. Only the pantry owner can update their pantry.
      operationId: update
      parameters:
        - name: id
          required: true
          in: path
          schema:
            format: uuid
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdatePantryDto'
      responses:
        '200':
          description: Pantry updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PantryResponseDto'
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: No permission - user does not own this pantry
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: Update pantry
      tags: *ref_9
    delete:
      description: >-
        Deletes a specific pantry by ID. Only the pantry owner can delete their
        pantry. All pantry items will be deleted as well (cascade delete).
      operationId: remove
      parameters:
        - name: id
          required: true
          in: path
          schema:
            format: uuid
            type: string
      responses:
        '200':
          description: Pantry deleted successfully
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: No permission - user does not own this pantry
        '404':
          description: Pantry not found
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: Delete pantry
      tags: *ref_9
  /api/v1/pantry-item:
    post:
      description: >-
        Creates a new Pantry Item and adds it to the specified pantry. The
        pantryId must be provided in the request body and must belong to the
        authenticated user. Users can have multiple pantries. The unit field is
        optional and defaults to PIECES if not provided. Requires user or admin
        role.
      operationId: create
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreatePantryItemDto'
      responses:
        '201':
          description: Pantry item created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PantryItemResponseDto'
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: Add a new item to Pantry
      tags: &ref_10
        - pantry-item
    get:
      description: >-
        Retrieve pantry items from a specific pantry. The pantryId must be
        provided as a query parameter and must belong to the authenticated user.
        Optional filtering by foodId, unit, or expiryDate.
      operationId: findAll
      parameters:
        - name: pantryId
          required: true
          in: query
          description: The ID of the pantry to get items from (UUID)
          schema:
            example: uuid-pantry-id
            type: string
        - name: foodId
          required: false
          in: query
          description: Filter by food ID (UUID)
          schema:
            example: uuid-food-id
            type: string
        - name: unit
          required: false
          in: query
          description: Filter by unit (PIECES, G, KG, ML, L, CUPS)
          schema:
            enum:
              - PIECES
              - G
              - KG
              - ML
              - L
              - CUPS
            type: string
        - name: expiryDate
          required: false
          in: query
          description: Filter by expiry date (ISO date string)
          schema:
            example: '2027-02-02'
            type: string
      responses:
        '200':
          description: Pantry items retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MultiplePantryItemResponseDto'
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: Get pantry items
      tags: *ref_10
  /api/v1/pantry-item/{id}:
    get:
      operationId: findById
      parameters:
        - name: id
          required: true
          in: path
          schema:
            format: uuid
            type: string
      responses:
        '200':
          description: pantry item found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PantryItemResponseDto'
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: Get specific pantry item by ID
      tags: *ref_10
    patch:
      description: >-
        Update quantity, unit, notes, or expiry date of a pantry item. All
        fields are optional.
      operationId: update
      parameters:
        - name: id
          required: true
          in: path
          schema:
            format: uuid
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdatePantryItemDto'
      responses:
        '200':
          description: Pantry item updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PantryItemResponseDto'
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: Update pantry item
      tags: *ref_10
    delete:
      description: Delete a specific pantry item by ID
      operationId: remove
      parameters:
        - name: id
          required: true
          in: path
          schema:
            format: uuid
            type: string
      responses:
        '200':
          description: pantry item deleted successfully
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: Remove item from pantry
      tags: *ref_10
  /api/v1/meals:
    post:
      operationId: create
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateMealDto'
      responses:
        '201':
          description: Meal created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MealResponseDto'
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: Create a meal
      tags: &ref_11
        - meals
    get:
      operationId: findAll
      parameters:
        - name: mealType
          required: false
          in: query
          description: Filter by meal type
          schema:
            type: string
            enum:
              - SALAD
              - MEAT
              - PASTA
              - RICE
              - VEGAN
        - name: search
          required: false
          in: query
          description: Search by name substring
          schema:
            type: string
        - name: page
          required: false
          in: query
          description: Page number
          schema:
            default: 1
            type: number
        - name: limit
          required: false
          in: query
          description: Items per page
          schema:
            default: 10
            type: number
      responses:
        '200':
          description: Meals retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MultipleMealResponseDto'
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: List meals for the user
      tags: *ref_11
  /api/v1/meals/{id}:
    get:
      operationId: findOne
      parameters:
        - name: id
          required: true
          in: path
          schema:
            format: uuid
            type: string
      responses:
        '200':
          description: Meal retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MealResponseDto'
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: Get a meal by id
      tags: *ref_11
    patch:
      operationId: update
      parameters:
        - name: id
          required: true
          in: path
          schema:
            format: uuid
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateMealDto'
      responses:
        '200':
          description: Meal updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MealResponseDto'
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: Update a meal
      tags: *ref_11
    delete:
      operationId: remove
      parameters:
        - name: id
          required: true
          in: path
          schema:
            format: uuid
            type: string
      responses:
        '200':
          description: Meal deleted successfully
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: Delete a meal
      tags: *ref_11
  /api/v1/recipes:
    post:
      operationId: create
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateRecipeDto'
      responses:
        '201':
          description: Recipe created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RecipeResponseDto'
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: Create a recipe
      tags: &ref_12
        - recipes
    get:
      operationId: findAll
      parameters:
        - name: page
          required: false
          in: query
          description: Page number
          schema:
            default: 1
            type: number
        - name: limit
          required: false
          in: query
          description: Items per page
          schema:
            default: 10
            type: number
        - name: mealType
          required: false
          in: query
          description: Filter by meal type
          schema:
            type: string
            enum:
              - SALAD
              - MEAT
              - PASTA
              - RICE
              - VEGAN
        - name: tags
          required: false
          in: query
          description: Filter by tags
          schema:
            type: array
            items:
              type: string
        - name: allergens
          required: false
          in: query
          description: Filter by allergens
          schema:
            type: array
            items:
              type: string
        - name: difficulty
          required: false
          in: query
          description: Difficulty label
          schema:
            type: string
        - name: search
          required: false
          in: query
          description: Search by title
          schema:
            type: string
      responses:
        '200':
          description: Recipes retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MultipleRecipeResponseDto'
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: List recipes
      tags: *ref_12
  /api/v1/recipes/{id}:
    get:
      operationId: findOne
      parameters:
        - name: id
          required: true
          in: path
          schema:
            format: uuid
            type: string
      responses:
        '200':
          description: Recipe retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RecipeResponseDto'
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: Get recipe by id
      tags: *ref_12
    patch:
      operationId: update
      parameters:
        - name: id
          required: true
          in: path
          schema:
            format: uuid
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateRecipeDto'
      responses:
        '200':
          description: Recipe updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RecipeResponseDto'
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: Update recipe
      tags: *ref_12
    delete:
      operationId: remove
      parameters:
        - name: id
          required: true
          in: path
          schema:
            format: uuid
            type: string
      responses:
        '200':
          description: Recipe deleted successfully
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: Delete recipe
      tags: *ref_12
  /api/v1/meal-logs:
    post:
      operationId: create
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateMealLogDto'
      responses:
        '201':
          description: Meal log created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MealLogResponseDto'
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: Create a meal log
      tags: &ref_13
        - meal-logs
    get:
      operationId: findAll
      parameters:
        - name: page
          required: false
          in: query
          description: Page number
          schema:
            default: 1
            type: number
        - name: limit
          required: false
          in: query
          description: Items per page
          schema:
            default: 10
            type: number
        - name: dateFrom
          required: false
          in: query
          description: From date ISO
          schema:
            type: string
        - name: dateTo
          required: false
          in: query
          description: To date ISO
          schema:
            type: string
        - name: typeOfMeal
          required: false
          in: query
          description: Meal type filter
          schema:
            type: string
            enum:
              - BREAKFAST
              - LUNCH
              - DINNER
              - SNACK
              - SPECIAL_DRINKS
        - name: mealType
          required: false
          in: query
          description: Filter by underlying meal type
          schema:
            type: string
            enum:
              - SALAD
              - MEAT
              - PASTA
              - RICE
              - VEGAN
        - name: mealFromPantry
          required: false
          in: query
          description: Only meals from pantry
          schema:
            type: boolean
        - name: eatenOut
          required: false
          in: query
          description: Only meals eaten out
          schema:
            type: boolean
      responses:
        '200':
          description: Meal logs retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MultipleMealLogResponseDto'
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: List meal logs
      tags: *ref_13
  /api/v1/meal-logs/{id}:
    get:
      operationId: findOne
      parameters:
        - name: id
          required: true
          in: path
          schema:
            format: uuid
            type: string
      responses:
        '200':
          description: Meal log retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MealLogResponseDto'
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: Get meal log by id
      tags: *ref_13
    patch:
      operationId: update
      parameters:
        - name: id
          required: true
          in: path
          schema:
            format: uuid
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateMealLogDto'
      responses:
        '200':
          description: Meal log updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MealLogResponseDto'
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: Update meal log
      tags: *ref_13
    delete:
      operationId: remove
      parameters:
        - name: id
          required: true
          in: path
          schema:
            format: uuid
            type: string
      responses:
        '200':
          description: Meal log deleted successfully
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: Delete meal log
      tags: *ref_13
  /api/v1/groups:
    post:
      description: >-
        Creates a new group and adds the creator as an admin. Returns the group
        with its unique invite code.
      operationId: create
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateUserGroupDto'
      responses:
        '201':
          description: Group created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserGroupResponseDto'
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: Create a new group
      tags: &ref_14
        - groups
    get:
      description: Returns all groups where the authenticated user is a member.
      operationId: findAll
      parameters: []
      responses:
        '200':
          description: List of groups
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/UserGroupResponseDto'
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: Get all groups for current user
      tags: *ref_14
  /api/v1/groups/{id}:
    get:
      description: Returns a specific group if the user is a member.
      operationId: findOne
      parameters:
        - name: id
          required: true
          in: path
          schema:
            format: uuid
            type: string
      responses:
        '200':
          description: Group found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserGroupResponseDto'
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Not a member of this group
        '404':
          description: Group not found
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: Get group by ID
      tags: *ref_14
    patch:
      description: Updates group name/description. Admin only.
      operationId: update
      parameters:
        - name: id
          required: true
          in: path
          schema:
            format: uuid
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateUserGroupDto'
      responses:
        '200':
          description: Group updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserGroupResponseDto'
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Admin privileges required
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: Update group
      tags: *ref_14
    delete:
      description: Deletes a group and all its memberships/virtual members. Admin only.
      operationId: remove
      parameters:
        - name: id
          required: true
          in: path
          schema:
            format: uuid
            type: string
      responses:
        '200':
          description: Group deleted successfully
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Admin privileges required
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: Delete group
      tags: *ref_14
  /api/v1/groups/join:
    post:
      description: Joins an existing group using the invite code.
      operationId: join
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/JoinGroupDto'
      responses:
        '201':
          description: Successfully joined the group
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserGroupResponseDto'
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Invalid invite code
        '409':
          description: Already a member of this group
      security:
        - JWT-auth: []
      summary: Join a group by invite code
      tags: *ref_14
  /api/v1/groups/{id}/leave:
    post:
      description: Leaves a group. Last admin cannot leave without transferring rights.
      operationId: leave
      parameters:
        - name: id
          required: true
          in: path
          schema:
            format: uuid
            type: string
      responses:
        '200':
          description: Left the group successfully
        '400':
          description: 'Cannot leave: you are the last admin'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: Leave a group
      tags: *ref_14
  /api/v1/groups/{id}/invite-code:
    get:
      description: Returns the current invite code for the group. Admin only.
      operationId: getInviteCode
      parameters:
        - name: id
          required: true
          in: path
          schema:
            format: uuid
            type: string
      responses:
        '200':
          description: Invite code returned
          content:
            application/json:
              schema:
                properties:
                  inviteCode:
                    type: string
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Admin privileges required
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: Get invite code
      tags: *ref_14
  /api/v1/groups/{id}/regenerate-code:
    post:
      description: Generates a new invite code, invalidating the old one. Admin only.
      operationId: regenerateInviteCode
      parameters:
        - name: id
          required: true
          in: path
          schema:
            format: uuid
            type: string
      responses:
        '200':
          description: New invite code generated
          content:
            application/json:
              schema:
                properties:
                  inviteCode:
                    type: string
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Admin privileges required
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: Regenerate invite code
      tags: *ref_14
  /api/v1/groups/{id}/members:
    get:
      description: Returns all registered members and virtual members of the group.
      operationId: getMembers
      parameters:
        - name: id
          required: true
          in: path
          schema:
            format: uuid
            type: string
      responses:
        '200':
          description: Members list
          content:
            application/json:
              schema:
                properties:
                  members:
                    type: array
                    items:
                      $ref: '#/components/schemas/GroupMemberResponseDto'
                  virtualMembers:
                    type: array
                    items:
                      $ref: '#/components/schemas/VirtualMemberResponseDto'
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: Get all members
      tags: *ref_14
  /api/v1/groups/{id}/members/{memberId}:
    delete:
      description: Removes a registered member from the group. Admin only.
      operationId: removeMember
      parameters:
        - name: id
          required: true
          in: path
          description: Group ID
          schema:
            format: uuid
            type: string
        - name: memberId
          required: true
          in: path
          description: Membership ID
          schema:
            format: uuid
            type: string
      responses:
        '200':
          description: Member removed successfully
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Admin privileges required
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: Remove a member
      tags: *ref_14
  /api/v1/groups/{id}/members/{memberId}/make-admin:
    post:
      description: >-
        Promotes a regular member to admin role. Existing admin only. Use this
        before leaving if you are the last admin.
      operationId: transferAdmin
      parameters:
        - name: id
          required: true
          in: path
          description: Group ID
          schema:
            format: uuid
            type: string
        - name: memberId
          required: true
          in: path
          description: Membership ID to promote
          schema:
            format: uuid
            type: string
      responses:
        '200':
          description: Member promoted to admin
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GroupMemberResponseDto'
        '400':
          description: Target is already an admin
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Admin privileges required
        '404':
          description: Member not found
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: Promote member to admin
      tags: *ref_14
  /api/v1/groups/{id}/virtual-members:
    post:
      description: >-
        Adds a member without an account (e.g., child or dependent). Any group
        member can add virtual members.
      operationId: addVirtualMember
      parameters:
        - name: id
          required: true
          in: path
          schema:
            format: uuid
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateVirtualMemberDto'
      responses:
        '201':
          description: Virtual member added
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VirtualMemberResponseDto'
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: Add a virtual member
      tags: *ref_14
  /api/v1/groups/{id}/virtual-members/{vmId}:
    patch:
      description: Updates virtual member information. Any group member can update.
      operationId: updateVirtualMember
      parameters:
        - name: id
          required: true
          in: path
          description: Group ID
          schema:
            format: uuid
            type: string
        - name: vmId
          required: true
          in: path
          description: Virtual member ID
          schema:
            format: uuid
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateVirtualMemberDto'
      responses:
        '200':
          description: Virtual member updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VirtualMemberResponseDto'
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: Update a virtual member
      tags: *ref_14
    delete:
      description: Removes a virtual member from the group. Any group member can remove.
      operationId: removeVirtualMember
      parameters:
        - name: id
          required: true
          in: path
          description: Group ID
          schema:
            format: uuid
            type: string
        - name: vmId
          required: true
          in: path
          description: Virtual member ID
          schema:
            format: uuid
            type: string
      responses:
        '200':
          description: Virtual member removed
        '400':
          description: Bad Request - Invalid input data or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '401':
          description: Unauthorized - Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '404':
          description: Not Found - Resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
        '409':
          description: Conflict - Resource already exists or state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponseDto'
      security:
        - JWT-auth: []
      summary: Remove a virtual member
      tags: *ref_14
  /api/v1:
    get:
      description: >-
        Returns a simple health check message to verify the application is
        running.
      operationId: getHello
      parameters: []
      responses:
        '200':
          description: Application is running
          content:
            application/json:
              schema:
                type: string
                example: Hello World!
      summary: Application health check
      tags:
        - health
info:
  title: FOODMISSION Data Framework API
  description: |2-

          A comprehensive backend system for managing food-related data and operations.
          
          ## Features
          - **Authentication**: Secure JWT-based authentication via Keycloak
          - **Food Management**: CRUD operations for food items with categorization
          - **OpenFoodFacts Integration**: Automatic nutritional data retrieval
          - **User Management**: User profiles and dietary preferences
          - **Health Monitoring**: Comprehensive health checks and metrics
          
          ## Getting Started
          1. Obtain a JWT token from the authentication endpoints
          2. Include the token in the Authorization header: `Bearer <token>`
          3. Use the interactive documentation below to explore available endpoints
          
          ## Authentication
          This API uses stateless JWT authentication via Keycloak.
          
          1. Get Keycloak configuration from `/auth/info`
          2. Authenticate directly with Keycloak using OAuth2/OIDC
          3. Include JWT tokens in the Authorization header: `Bearer <token>`
          
          ## Rate Limiting
          API requests are rate-limited to prevent abuse. Check response headers for rate limit information.
          
          ## Error Handling
          All endpoints follow a consistent error response format. When an error occurs, the API returns a JSON object with the following structure:
          
          - **statusCode**: HTTP status code (e.g., 400, 401, 404, 500)
          - **message**: Human-readable error message or array of validation errors
          - **error**: Error code/type (e.g., 'VALIDATION_ERROR', 'RESOURCE_NOT_FOUND')
          - **timestamp**: ISO 8601 timestamp when the error occurred
          - **path**: API path where the error occurred
          - **correlationId**: Unique identifier for request tracing
          - **details**: Optional object containing additional error information (e.g., validation errors array)
          
          ### Common Error Responses
          
          - **400 Bad Request**: Invalid input data or validation failed. The `details.errors` field contains an array of validation error messages.
          - **401 Unauthorized**: Authentication required or invalid/expired JWT token.
          - **403 Forbidden**: Authenticated but insufficient permissions for the requested resource.
          - **404 Not Found**: The requested resource does not exist.
          - **409 Conflict**: Resource already exists or state conflict (e.g., duplicate email).
          - **422 Unprocessable Entity**: Request is well-formed but semantically incorrect (business validation failed).
          - **429 Too Many Requests**: Rate limit exceeded. Check response headers for retry information.
          - **500 Internal Server Error**: An unexpected server error occurred. The correlation ID can be used for support.
          
          ### Example Error Response
          
          ```json
          {
            "statusCode": 400,
            "message": "Validation failed",
            "error": "VALIDATION_ERROR",
            "timestamp": "2024-01-15T10:30:00.000Z",
            "path": "/api/v1/foods",
            "correlationId": "abc123def456",
            "details": {
              "errors": [
                "name should not be empty",
                "categoryId must be a valid UUID"
              ]
            }
          }
          ```
          
          ## Support
          For support and documentation, visit our [GitHub repository](https://github.com/reedu-reengineering-education/foodmission-data-framework).
        
  version: 1.0.0
  contact:
    name: FOODMISSION Team
    url: >-
      https://github.com/reedu-reengineering-education/foodmission-data-framework
    email: support@foodmission.dev
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
tags:
  - name: auth
    description: Authentication and authorization endpoints for Keycloak integration
  - name: foods
    description: Food item management with OpenFoodFacts integration for nutritional data
  - name: users
    description: User profile management and dietary preferences configuration
  - name: health
    description: Application health checks, readiness probes, and monitoring metrics
servers:
  - url: http://localhost:3000
    description: Development server
  - url: https://api.foodmission.dev
    description: Production server
  - url: https://staging-api.foodmission.dev
    description: Staging server
components:
  securitySchemes:
    JWT-auth:
      scheme: bearer
      bearerFormat: JWT
      type: http
      name: JWT
      description: Enter JWT token obtained from Keycloak authentication
      in: header
  schemas:
    ApiErrorResponseDto:
      type: object
      properties:
        statusCode:
          type: integer
          description: HTTP status code
          example: 400
        message:
          description: Error message or array of validation errors
          oneOf:
            - type: string
              example: Bad Request
            - type: array
              items:
                type: string
              example:
                - name should not be empty
                - email must be a valid email
        error:
          type: string
          description: Error type
          example: Bad Request
        timestamp:
          type: string
          description: Timestamp when the error occurred
          example: '2024-01-15T10:30:00Z'
          format: date-time
        path:
          type: string
          description: API path where the error occurred
          example: /api/v1/foods
        correlationId:
          type: string
          description: Correlation ID for request tracing
          example: abc123def456
      required:
        - statusCode
        - message
        - error
        - timestamp
        - path
    CreateUserDto:
      type: object
      properties:
        keycloakId:
          type: string
          description: Keycloak user ID
        email:
          type: string
          description: User email address
        firstName:
          type: string
          description: User first name
        lastName:
          type: string
          description: User last name
        preferences:
          type: object
          description: User preferences
        settings:
          type: object
          description: User settings
      required:
        - keycloakId
        - email
        - firstName
        - lastName
    UpdateUserDto:
      type: object
      properties:
        keycloakId:
          type: string
          description: Keycloak user ID
        email:
          type: string
          description: User email address
        firstName:
          type: string
          description: User first name
        lastName:
          type: string
          description: User last name
        preferences:
          type: object
          description: User preferences
        settings:
          type: object
          description: User settings
    UserPreferencesDto:
      type: object
      properties:
        dietaryRestrictions:
          description: Dietary restrictions
          type: array
          items:
            type: string
        allergies:
          description: Food allergies
          type: array
          items:
            type: string
        preferredCategories:
          description: Preferred food categories
          type: array
          items:
            type: string
    CreateFoodDto:
      type: object
      properties:
        name:
          type: string
          description: The name of the food item
          example: Organic Whole Milk
          maxLength: 255
        description:
          type: string
          description: Detailed description of the food item
          example: Fresh organic whole milk from grass-fed cows
          maxLength: 1000
        barcode:
          type: string
          description: Product barcode (EAN, UPC, etc.)
          example: '3017620422003'
          maxLength: 50
        openFoodFactsId:
          type: string
          description: OpenFoodFacts product identifier
          example: '3017620422003'
          maxLength: 100
      required:
        - name
    NutritionalInfoDto:
      type: object
      properties:
        energyKcal:
          type: number
          description: Energy content in kilocalories per 100g
          example: 64
        energyKj:
          type: number
          description: Energy content in kilojoules per 100g
          example: 268
        fat:
          type: number
          description: Fat content in grams per 100g
          example: 3.25
        saturatedFat:
          type: number
          description: Saturated fat content in grams per 100g
          example: 1.9
        transFat:
          type: number
          description: Trans fat content in grams per 100g
          example: 0.1
        cholesterol:
          type: number
          description: Cholesterol content in milligrams per 100g
          example: 10
        carbohydrates:
          type: number
          description: Carbohydrates content in grams per 100g
          example: 4.8
        sugars:
          type: number
          description: Sugars content in grams per 100g
          example: 4.8
        fiber:
          type: number
          description: Fiber content in grams per 100g
          example: 0
        proteins:
          type: number
          description: Proteins content in grams per 100g
          example: 3.4
        salt:
          type: number
          description: Salt content in grams per 100g
          example: 0.1
        sodium:
          type: number
          description: Sodium content in milligrams per 100g
          example: 44
        vitaminA:
          type: number
          description: Vitamin A content in micrograms per 100g
          example: 46
        vitaminC:
          type: number
          description: Vitamin C content in milligrams per 100g
          example: 0
        calcium:
          type: number
          description: Calcium content in milligrams per 100g
          example: 113
        iron:
          type: number
          description: Iron content in milligrams per 100g
          example: 0.03
    OpenFoodFactsInfoDto:
      type: object
      properties:
        barcode:
          type: string
          description: Product barcode from OpenFoodFacts
          example: '3017620422003'
        name:
          type: string
          description: Product name from OpenFoodFacts
          example: Nutella
        brands:
          description: List of brands associated with the product
          example:
            - Ferrero
          type: array
          items:
            type: string
        categories:
          description: List of categories the product belongs to
          example:
            - Spreads
            - Sweet spreads
            - Cocoa and hazelnuts spreads
          type: array
          items:
            type: string
        ingredients:
          type: string
          description: Ingredients list as text
          example: >-
            Sugar, palm oil, hazelnuts, skimmed milk powder, fat-reduced cocoa,
            lecithin, vanillin
        allergens:
          description: List of allergens present in the product
          example:
            - Milk
            - Nuts
          type: array
          items:
            type: string
        nutritionGrade:
          type: string
          description: Nutri-Score grade (A, B, C, D, E)
          example: D
          enum:
            - A
            - B
            - C
            - D
            - E
        novaGroup:
          type: number
          description: >-
            NOVA group classification (1-4, where 1 is unprocessed and 4 is
            ultra-processed)
          example: 4
          minimum: 1
          maximum: 4
        nutritionalInfo:
          description: Nutritional information from OpenFoodFacts
          allOf:
            - $ref: '#/components/schemas/NutritionalInfoDto'
        imageUrl:
          type: string
          description: URL to product image
          example: >-
            https://static.openfoodfacts.org/images/products/301/762/042/2003/front_fr.4.400.jpg
        completeness:
          type: number
          description: Data completeness percentage (0-100)
          example: 85
          minimum: 0
          maximum: 100
    FoodResponseDto:
      type: object
      properties:
        id:
          type: string
          description: Unique identifier for the food item
          example: 550e8400-e29b-41d4-a716-446655440000
          format: uuid
        name:
          type: string
          description: Name of the food item
          example: Organic Whole Milk
        description:
          type: string
          description: Description of the food item
          example: Fresh organic whole milk from grass-fed cows
        barcode:
          type: string
          description: Product barcode
          example: '3017620422003'
        openFoodFactsId:
          type: string
          description: OpenFoodFacts product identifier
          example: '3017620422003'
        openFoodFactsInfo:
          description: Additional information from OpenFoodFacts database
          allOf:
            - $ref: '#/components/schemas/OpenFoodFactsInfoDto'
        createdAt:
          type: string
          description: Timestamp when the food item was created
          example: '2024-01-15T10:30:00Z'
          format: date-time
        updatedAt:
          type: string
          description: Timestamp when the food item was last updated
          example: '2024-01-15T10:30:00Z'
          format: date-time
        createdBy:
          type: string
          description: UUID of the user who created this food item
          example: 550e8400-e29b-41d4-a716-446655440001
          format: uuid
      required:
        - id
        - name
        - createdAt
        - updatedAt
        - createdBy
    PaginatedFoodResponseDto:
      type: object
      properties:
        data:
          description: Array of food items
          type: array
          items:
            $ref: '#/components/schemas/FoodResponseDto'
        total:
          type: number
          description: Total number of food items matching the query
          example: 150
        page:
          type: number
          description: Current page number
          example: 1
        limit:
          type: number
          description: Number of items per page
          example: 10
        totalPages:
          type: number
          description: Total number of pages
          example: 15
      required:
        - data
        - total
        - page
        - limit
        - totalPages
    UpdateFoodDto:
      type: object
      properties:
        name:
          type: string
          description: The name of the food item
          example: Organic Whole Milk
          maxLength: 255
        description:
          type: string
          description: Detailed description of the food item
          example: Fresh organic whole milk from grass-fed cows
          maxLength: 1000
        barcode:
          type: string
          description: Product barcode (EAN, UPC, etc.)
          example: '3017620422003'
          maxLength: 50
        openFoodFactsId:
          type: string
          description: OpenFoodFacts product identifier
          example: '3017620422003'
          maxLength: 100
    CreateShoppingListDto:
      type: object
      properties:
        title:
          type: string
          description: The name of the shopping list
          example: Family-Shopping-List
          maxLength: 255
      required:
        - title
    ShoppingListResponseDto:
      type: object
      properties:
        id:
          type: string
          description: Unique identifier for the shopping list
          example: 550e8400-e29b-41d4-a716-446655440000
          format: uuid
        userId:
          type: string
          description: UUID of the user who created this shopping list
          example: 550e8400-e29b-41d4-a716-446655440001
          format: uuid
        title:
          type: string
          description: title of the shopping list
          example: Family shopping list
      required:
        - id
        - userId
        - title
    MultipleShoppingListResponseDto:
      type: object
      properties:
        data:
          description: Array of shopping lists
          type: array
          items:
            $ref: '#/components/schemas/ShoppingListResponseDto'
      required:
        - data
    ShoppingListItemResponseDto:
      type: object
      properties:
        id:
          type: string
          description: The unique identifier of the shopping list item
          example: uuid-item-id
        quantity:
          type: number
          description: The quantity of the item
          example: 2
        unit:
          type: string
          description: The unit of measurement
          example: kg
        notes:
          type: object
          description: Additional notes for the item
          example: Buy organic if available
        checked:
          type: boolean
          description: Whether the item is checked off
          example: false
        shoppingListId:
          type: string
          description: The ID of the shopping list
          example: uuid-shopping-list-id
        foodId:
          type: string
          description: The ID of the food item
          example: uuid-food-id
        createdAt:
          format: date-time
          type: string
          description: The creation timestamp
          example: '2024-01-15T10:30:00.000Z'
        updatedAt:
          format: date-time
          type: string
          description: The last update timestamp
          example: '2024-01-15T11:30:00.000Z'
        shoppingList:
          description: Associated shopping list
          allOf:
            - $ref: '#/components/schemas/ShoppingListResponseDto'
        food:
          description: Associated food item
          allOf:
            - $ref: '#/components/schemas/FoodResponseDto'
      required:
        - id
        - quantity
        - unit
        - checked
        - shoppingListId
        - foodId
        - createdAt
        - updatedAt
        - shoppingList
        - food
    MultipleShoppingListItemResponseDto:
      type: object
      properties:
        data:
          description: Array of shopping list items
          type: array
          items:
            $ref: '#/components/schemas/ShoppingListItemResponseDto'
      required:
        - data
    UpdateShoppingListDto:
      type: object
      properties:
        title:
          type: string
          description: The name of the shopping list
          example: Family-Shopping-List
          maxLength: 255
      required:
        - title
    CreateShoppingListItemDto:
      type: object
      properties:
        quantity:
          type: number
          description: The quantity of the item
          example: 2
          minimum: 1
        unit:
          type: string
          description: The unit of measurement
          example: KG
          enum:
            - PIECES
            - G
            - KG
            - ML
            - L
            - CUPS
        notes:
          type: string
          description: Additional notes for the item
          example: Buy organic if available
          maxLength: 500
        checked:
          type: boolean
          description: Whether the item is checked off
          example: false
        shoppingListId:
          type: string
          description: The ID of the shopping list
          example: uuid-shopping-list-id
        foodId:
          type: string
          description: The ID of the food item
          example: uuid-food-id
      required:
        - quantity
        - checked
        - shoppingListId
        - foodId
    UpdateShoppingListItemDto:
      type: object
      properties:
        quantity:
          type: number
          description: The quantity of the item
          example: 3
          minimum: 1
        unit:
          type: string
          description: The unit of measurement
          example: KG
          enum:
            - PIECES
            - G
            - KG
            - ML
            - L
            - CUPS
        notes:
          type: string
          description: Additional notes for the item
          example: Buy organic if available
          maxLength: 500
        checked:
          type: boolean
          description: Whether the item is checked off
          example: true
        shoppingListId:
          type: string
          description: The ID of the shopping list
          example: uuid-shopping-list-id
        foodId:
          type: string
          description: The ID of the food item
          example: uuid-food-id
    CreatePantryDto:
      type: object
      properties:
        title:
          type: string
          description: The name of the pantry
          example: Home Pantry
          maxLength: 255
      required:
        - title
    PantryItemResponseDto:
      type: object
      properties:
        id:
          type: string
          description: The unique identifier of the pantry item
          example: uuid-item-id
        quantity:
          type: number
          description: The quantity of the item
          example: 2
          minimum: 1
        unit:
          type: string
          description: The unit of measurement
          example: KG
          enum:
            - PIECES
            - G
            - KG
            - ML
            - L
            - CUPS
        notes:
          type: string
          description: Additional notes for the item
          example: Store in cool place
          maxLength: 500
        expiryDate:
          format: date-time
          type: string
          description: When the food will expire
          example: '2027-02-02T00:00:00.000Z'
        pantryId:
          type: string
          description: The ID of the pantry
          example: uuid-pantry-id
        foodId:
          type: string
          description: The ID of the food item
          example: uuid-food-id
        food:
          description: The food item details
          allOf:
            - $ref: '#/components/schemas/FoodResponseDto'
      required:
        - id
        - quantity
        - unit
        - pantryId
        - foodId
    PantryResponseDto:
      type: object
      properties:
        id:
          type: string
          description: The unique identifier of the pantry
          example: uuid-pantry-id
        userId:
          type: string
          description: The user ID who owns this pantry
          example: uuid-user-id
        title:
          type: string
          description: The pantry title
          example: Home or Work
        items:
          description: List of items in the pantry
          type: array
          items:
            $ref: '#/components/schemas/PantryItemResponseDto'
      required:
        - id
        - userId
        - title
        - items
    UpdatePantryDto:
      type: object
      properties:
        title:
          type: string
          description: The name of the pantry
          example: Refrigerator
          maxLength: 255
      required:
        - title
    CreatePantryItemDto:
      type: object
      properties:
        pantryId:
          type: string
          description: The ID of the pantry to add the item to
          example: uuid-pantry-id
        foodId:
          type: string
          description: The ID of the food item to add
          example: uuid-food-id
        quantity:
          type: number
          description: The quantity of the item
          example: 2
          minimum: 0.01
        unit:
          type: string
          description: The unit of measurement (defaults to PIECES if not provided)
          example: KG
          enum:
            - PIECES
            - G
            - KG
            - ML
            - L
            - CUPS
          default: PIECES
        notes:
          type: string
          description: Additional notes for the item
          example: Store in cool place
          maxLength: 500
        expiryDate:
          format: date-time
          type: string
          description: When the food will expire (ISO date string)
          example: '2027-02-02'
      required:
        - pantryId
        - foodId
        - quantity
    MultiplePantryItemResponseDto:
      type: object
      properties:
        data:
          description: Array of pantry items
          type: array
          items:
            $ref: '#/components/schemas/PantryItemResponseDto'
      required:
        - data
    UpdatePantryItemDto:
      type: object
      properties:
        quantity:
          type: number
          description: The quantity of the item
          example: 3
          minimum: 0.01
        unit:
          type: string
          description: Unit of the item
          example: KG
          enum:
            - PIECES
            - G
            - KG
            - ML
            - L
            - CUPS
        notes:
          type: string
          description: Additional notes for the item
          example: Buy organic if available
          maxLength: 500
        expiryDate:
          format: date-time
          type: string
          description: When the food will expire (ISO date string)
          example: '2027-03-15'
        foodId:
          type: string
          description: The ID of the food item
          example: uuid-food-id
    CreateMealDto:
      type: object
      properties:
        name:
          type: string
          description: Meal name
          example: Grilled chicken salad
        mealType:
          type: string
          enum: &ref_15
            - SALAD
            - MEAT
            - PASTA
            - RICE
            - VEGAN
          description: Meal type
        calories:
          type: number
          description: Calories for the meal
          example: 520
        proteins:
          type: number
          description: Protein amount in grams
          example: 42
        nutritionalInfo:
          type: object
          description: Structured nutritional information
          example: &ref_16
            carbs: 40
            fats: 20
            sugar: 5
        sustainabilityScore:
          type: number
          description: Sustainability score
          example: 0.72
        price:
          type: number
          description: Estimated meal price or cost
          example: 8.5
        pantryItemId:
          type: string
          description: Link to pantry item if sourced from pantry
          format: uuid
        barcode:
          type: string
          description: Barcode of the meal (if packaged)
      required:
        - name
        - mealType
    MealResponseDto:
      type: object
      properties:
        id:
          type: string
          description: Meal id
          format: uuid
        name:
          type: string
          description: Meal name
        mealType:
          type: string
          enum:
            - SALAD
            - MEAT
            - PASTA
            - RICE
            - VEGAN
          description: Meal type
        calories:
          type: number
          description: Calories
        proteins:
          type: number
          description: Proteins
        nutritionalInfo:
          type: object
          description: Nutritional information
        sustainabilityScore:
          type: number
          description: Sustainability score
        price:
          type: number
          description: Estimated price or cost
        pantryItemId:
          type: object
          description: Linked pantry item id
          format: uuid
        barcode:
          type: object
          description: Barcode
        userId:
          type: string
          description: User owner
          format: uuid
        createdAt:
          format: date-time
          type: string
          description: Created at ISO date
        updatedAt:
          format: date-time
          type: string
          description: Updated at ISO date
      required:
        - id
        - name
        - mealType
        - userId
        - createdAt
        - updatedAt
    MultipleMealResponseDto:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/MealResponseDto'
        total:
          type: number
          description: Total meals
        page:
          type: number
          description: Page number
        limit:
          type: number
          description: Items per page
        totalPages:
          type: number
          description: Total pages
      required:
        - data
        - total
        - page
        - limit
        - totalPages
    UpdateMealDto:
      type: object
      properties:
        name:
          type: string
          description: Meal name
          example: Grilled chicken salad
        mealType:
          type: string
          enum: *ref_15
          description: Meal type
        calories:
          type: number
          description: Calories for the meal
          example: 520
        proteins:
          type: number
          description: Protein amount in grams
          example: 42
        nutritionalInfo:
          type: object
          description: Structured nutritional information
          example: *ref_16
        sustainabilityScore:
          type: number
          description: Sustainability score
          example: 0.72
        price:
          type: number
          description: Estimated meal price or cost
          example: 8.5
        pantryItemId:
          type: string
          description: Link to pantry item if sourced from pantry
          format: uuid
        barcode:
          type: string
          description: Barcode of the meal (if packaged)
    CreateRecipeDto:
      type: object
      properties:
        mealId:
          type: string
          description: Meal identifier this recipe is based on
          format: uuid
        title:
          type: string
          description: Recipe title
          example: Hearty veggie pasta
        description:
          type: string
          description: Short description
        instructions:
          type: string
          description: Cooking instructions
        prepTime:
          type: number
          description: Prep time in minutes
          example: 15
        cookTime:
          type: number
          description: Cook time in minutes
          example: 30
        servings:
          type: number
          description: Servings
          example: 4
        difficulty:
          type: string
          description: Difficulty label
          example: easy
        tags:
          description: Tags for filtering
          example: &ref_17
            - vegan
            - quick
          type: array
          items:
            type: string
        nutritionalInfo:
          type: object
          description: Structured nutritional info
          example: &ref_18
            carbs: 50
            fats: 10
            fiber: 8
        sustainabilityScore:
          type: number
          description: Sustainability score
          example: 0.65
        price:
          type: number
          description: Estimated recipe price or cost
          example: 12.5
        allergens:
          description: Known allergens
          example: &ref_19
            - nuts
            - gluten
          type: array
          items:
            type: string
      required:
        - mealId
        - title
    RecipeResponseDto:
      type: object
      properties:
        id:
          type: string
          description: Recipe id
          format: uuid
        userId:
          type: string
          description: Owner user id
          format: uuid
        mealId:
          type: string
          description: Meal reference id
          format: uuid
        title:
          type: string
          description: Recipe title
        description:
          type: string
          description: Description
        instructions:
          type: string
          description: Instructions
        prepTime:
          type: number
          description: Prep time minutes
        cookTime:
          type: number
          description: Cook time minutes
        servings:
          type: number
          description: Servings count
        difficulty:
          type: string
          description: Difficulty label
        tags:
          description: Tags
          type: array
          items:
            type: string
        nutritionalInfo:
          type: object
          description: Nutritional info payload
        sustainabilityScore:
          type: number
          description: Sustainability score
        price:
          type: number
          description: Estimated price or cost
        allergens:
          description: Allergens
          type: array
          items:
            type: string
        rating:
          type: number
          description: Aggregate rating value
        ratingCount:
          type: number
          description: Number of ratings
        createdAt:
          format: date-time
          type: string
          description: Created at
        updatedAt:
          format: date-time
          type: string
          description: Updated at
        meal:
          description: Attached meal
          allOf:
            - $ref: '#/components/schemas/MealResponseDto'
      required:
        - id
        - userId
        - mealId
        - title
        - rating
        - ratingCount
        - createdAt
        - updatedAt
    MultipleRecipeResponseDto:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/RecipeResponseDto'
        total:
          type: number
          description: Total recipes
        page:
          type: number
          description: Page
        limit:
          type: number
          description: Limit
        totalPages:
          type: number
          description: Total pages
      required:
        - data
        - total
        - page
        - limit
        - totalPages
    UpdateRecipeDto:
      type: object
      properties:
        mealId:
          type: string
          description: Meal identifier this recipe is based on
          format: uuid
        title:
          type: string
          description: Recipe title
          example: Hearty veggie pasta
        description:
          type: string
          description: Short description
        instructions:
          type: string
          description: Cooking instructions
        prepTime:
          type: number
          description: Prep time in minutes
          example: 15
        cookTime:
          type: number
          description: Cook time in minutes
          example: 30
        servings:
          type: number
          description: Servings
          example: 4
        difficulty:
          type: string
          description: Difficulty label
          example: easy
        tags:
          description: Tags for filtering
          example: *ref_17
          type: array
          items:
            type: string
        nutritionalInfo:
          type: object
          description: Structured nutritional info
          example: *ref_18
        sustainabilityScore:
          type: number
          description: Sustainability score
          example: 0.65
        price:
          type: number
          description: Estimated recipe price or cost
          example: 12.5
        allergens:
          description: Known allergens
          example: *ref_19
          type: array
          items:
            type: string
    CreateMealLogDto:
      type: object
      properties:
        mealId:
          type: string
          description: Meal consumed
          format: uuid
        typeOfMeal:
          type: string
          description: Type of meal
          enum: &ref_20
            - BREAKFAST
            - LUNCH
            - DINNER
            - SNACK
            - SPECIAL_DRINKS
        timestamp:
          type: string
          description: Timestamp of consumption (ISO string)
        mealFromPantry:
          type: boolean
          description: Whether meal came from pantry
        eatenOut:
          type: boolean
          description: Whether meal was eaten out
      required:
        - mealId
        - typeOfMeal
    MealLogResponseDto:
      type: object
      properties:
        id:
          type: string
          description: Meal log id
          format: uuid
        userId:
          type: string
          description: User id
          format: uuid
        mealId:
          type: string
          description: Meal id
          format: uuid
        typeOfMeal:
          type: string
          enum:
            - BREAKFAST
            - LUNCH
            - DINNER
            - SNACK
            - SPECIAL_DRINKS
        timestamp:
          format: date-time
          type: string
          description: Timestamp of the meal
        mealFromPantry:
          type: boolean
          description: From pantry flag
        eatenOut:
          type: boolean
          description: Eaten out flag
        createdAt:
          format: date-time
          type: string
          description: Created at
        updatedAt:
          format: date-time
          type: string
          description: Updated at
        meal:
          description: Linked meal details
          allOf:
            - $ref: '#/components/schemas/MealResponseDto'
      required:
        - id
        - userId
        - mealId
        - typeOfMeal
        - timestamp
        - mealFromPantry
        - eatenOut
        - createdAt
        - updatedAt
    MultipleMealLogResponseDto:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/MealLogResponseDto'
        total:
          type: number
          description: Total logs
        page:
          type: number
          description: Page
        limit:
          type: number
          description: Limit
        totalPages:
          type: number
          description: Total pages
      required:
        - data
        - total
        - page
        - limit
        - totalPages
    UpdateMealLogDto:
      type: object
      properties:
        mealId:
          type: string
          description: Meal consumed
          format: uuid
        typeOfMeal:
          type: string
          description: Type of meal
          enum: *ref_20
        timestamp:
          type: string
          description: Timestamp of consumption (ISO string)
        mealFromPantry:
          type: boolean
          description: Whether meal came from pantry
        eatenOut:
          type: boolean
          description: Whether meal was eaten out
    CreateUserGroupDto:
      type: object
      properties:
        name:
          type: string
          description: The name of the group
          example: Smith Family
          maxLength: 255
        description:
          type: string
          description: Optional description of the group
          example: Our family shopping and meal planning group
          maxLength: 1000
      required:
        - name
    GroupMemberResponseDto:
      type: object
      properties:
        id:
          type: string
          description: The unique identifier of the membership
          example: uuid-membership-id
        userId:
          type: string
          description: The user ID of the member
          example: uuid-user-id
        role:
          type: string
          description: The role of the member in the group
          enum:
            - ADMIN
            - MEMBER
          example: MEMBER
        joinedAt:
          format: date-time
          type: string
          description: When the user joined the group
        firstName:
          type: string
          description: First name of the user
          example: John
        lastName:
          type: string
          description: Last name of the user
          example: Doe
        email:
          type: string
          description: Email of the user
          example: john@example.com
      required:
        - id
        - userId
        - role
        - joinedAt
        - firstName
        - lastName
        - email
    VirtualMemberResponseDto:
      type: object
      properties:
        id:
          type: string
          description: The unique identifier of the virtual member
          example: uuid-virtual-member-id
        nickname:
          type: string
          description: Nickname of the virtual member
          example: Little Timmy
        age:
          type: number
          description: Age of the virtual member
          example: 8
        gender:
          type: string
          description: Gender of the virtual member
          enum:
            - MALE
            - FEMALE
            - OTHER
            - PREFER_NOT_TO_SAY
        activityLevel:
          type: string
          description: Physical activity level
          enum:
            - SEDENTARY
            - LIGHT
            - MODERATE
            - ACTIVE
            - VERY_ACTIVE
        annualIncome:
          type: string
          description: Annual income level
          enum:
            - BELOW_10000
            - FROM_10000_TO_19999
            - FROM_20000_TO_34999
            - FROM_35000_TO_49999
            - FROM_50000_TO_74999
            - FROM_75000_TO_99999
            - ABOVE_100000
        preferences:
          type: object
          description: Free-form preferences (JSON)
        createdAt:
          format: date-time
          type: string
          description: When the virtual member was created
        createdBy:
          type: string
          description: User ID who created this virtual member
          example: uuid-user-id
      required:
        - id
        - nickname
        - createdAt
        - createdBy
    UserGroupResponseDto:
      type: object
      properties:
        id:
          type: string
          description: The unique identifier of the group
          example: uuid-group-id
        name:
          type: string
          description: The name of the group
          example: Smith Family
        description:
          type: string
          description: Optional description of the group
          example: Our family shopping and meal planning group
        inviteCode:
          type: string
          description: The invite code for joining the group
          example: abc123-def456
        createdBy:
          type: string
          description: The user ID who created the group
          example: uuid-user-id
        createdAt:
          format: date-time
          type: string
          description: When the group was created
        members:
          description: List of registered members in the group
          type: array
          items:
            $ref: '#/components/schemas/GroupMemberResponseDto'
        virtualMembers:
          description: List of virtual members (without accounts)
          type: array
          items:
            $ref: '#/components/schemas/VirtualMemberResponseDto'
      required:
        - id
        - name
        - inviteCode
        - createdBy
        - createdAt
        - members
        - virtualMembers
    UpdateUserGroupDto:
      type: object
      properties:
        name:
          type: string
          description: The name of the group
          example: Smith Family
          maxLength: 255
        description:
          type: string
          description: Optional description of the group
          example: Our family shopping and meal planning group
          maxLength: 1000
    JoinGroupDto:
      type: object
      properties:
        inviteCode:
          type: string
          description: The invite code to join the group
          example: abc123-def456-ghi789
      required:
        - inviteCode
    CreateVirtualMemberDto:
      type: object
      properties:
        nickname:
          type: string
          description: Nickname of the virtual member
          example: Little Timmy
          maxLength: 255
        age:
          type: number
          description: Age of the virtual member
          example: 8
          minimum: 0
          maximum: 150
        gender:
          type: string
          description: Gender of the virtual member
          enum:
            - MALE
            - FEMALE
            - OTHER
            - PREFER_NOT_TO_SAY
        activityLevel:
          type: string
          description: Physical activity level
          enum:
            - SEDENTARY
            - LIGHT
            - MODERATE
            - ACTIVE
            - VERY_ACTIVE
        annualIncome:
          type: string
          description: Annual income level
          enum:
            - BELOW_10000
            - FROM_10000_TO_19999
            - FROM_20000_TO_34999
            - FROM_35000_TO_49999
            - FROM_50000_TO_74999
            - FROM_75000_TO_99999
            - ABOVE_100000
        preferences:
          type: object
          description: Free-form preferences (JSON)
          example:
            dietaryPreference: vegetarian
      required:
        - nickname
    UpdateVirtualMemberDto:
      type: object
      properties:
        nickname:
          type: string
          description: Nickname of the virtual member
          example: Little Timmy
          maxLength: 255
        age:
          type: number
          description: Age of the virtual member
          example: 8
          minimum: 0
          maximum: 150
        gender:
          type: string
          description: Gender of the virtual member
          enum:
            - MALE
            - FEMALE
            - OTHER
            - PREFER_NOT_TO_SAY
        activityLevel:
          type: string
          description: Physical activity level
          enum:
            - SEDENTARY
            - LIGHT
            - MODERATE
            - ACTIVE
            - VERY_ACTIVE
        annualIncome:
          type: string
          description: Annual income level
          enum:
            - BELOW_10000
            - FROM_10000_TO_19999
            - FROM_20000_TO_34999
            - FROM_35000_TO_49999
            - FROM_50000_TO_74999
            - FROM_75000_TO_99999
            - ABOVE_100000
        preferences:
          type: object
          description: Free-form preferences (JSON)
          example:
            dietaryPreference: vegetarian
